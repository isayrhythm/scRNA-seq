
## cell ranger 软件

* cellranger mkfastq   

* cellranger count

* cellranger multi 

* cellranger aggr

* cellranger reanalyze

 * bcl2fastq  
 不需要fastq文件就不需要安装bcl2fastq
 If you know that you will not need to demultiplex and generate FASTQ files, you do not need to install bcl2fastq

 
 ## 开始前的检测（Perform a sitecheck）

 ```
cellranger sitecheck > sitecheck.txt
 ```
 现场检查的目的是检查您的系统，以确保它满足运行cellranger管道的系统要求。运行该命令并使用>符号将输出重定向到文本文件。

 ## Cell Ranger pipelines配置需求：

* 8-core Intel or AMD processor (16 cores recommended)  
* 64GB RAM (128GB recommended)  
* 1TB free disk space  
* 64-bit CentOS/RedHat 7.0 or Ubuntu 14.04  
* 其他：   
16000最大打开文件要求（在/etc/security/limits.conf添加：  
用户名 soft nofile 100000
用户名 hard nofile 100000）


## 执行测试运行

```
cellranger testrun --id=check_install
```

## Workflows

如果您从(BCL)文件开始，Cell Ranger,使用cellranger mkfastq 生成fastq。  
如果已经用bcl2fastq或bcl-convert生成FASTQ文件，或者从公共来源(如SRA)开始，则可以跳过cellranger mkfastq，从cellranger count开始。



## 开始吧

### Running cellranger mkfastq

作用**raw base call (BCL) files generated by Illumina sequencers into FASTQ files**  
它是Illumina的bcl2fastq的一个包装器，具有特定于10x Genomics库和简化的样本表格式的附加功能

* BCL数据  
 根据所使用的测序仪器的不同，数据可能看起来与此略有不同。可以查看目录检查完整性。如果没有看到**RTAcomcomplete .txt、RunInfo.xml和runParameters.xml**文件，那么接下来很可能会失败。如果缺少这些文件中的任何一个，请与测序提供商联系，并询问完整的运行目录。

* 执行cellranger mkfastq   
```
cellranger mkfastq --id=mytest --run=cellranger-tiny-bcl-1.2.0/ --csv=cellranger-tiny-bcl-simple-1.2.0.csv
```
包含三个参数 --id, --run, and --csv.
    * --id可以是任何东西。管道使用它来命名Cell Ranger将要创建并在其中运行的输出目录
    * --run参数指向包含BCL文件的Illumina运行文件夹
    * --csv参数是一个以逗号分隔的值(csv)文件，它描述了如何在Illumina流单元上对样本进行索引。  


### 
* 准备  
  * FASTQ files
  * reference transcriptome  
关于参考基因组：单细胞测序的参考基因组可以从其他来源下载。但是，10x Genomics为人类和小鼠基因组提供了预构建的参考文献，可与Cell Ranger一起使用。研究人员可以为其他物种制作自定义参考基因组，或将感兴趣的自定义标记基因添加到参考基因组中，例如GFP。自行[创建索引](https://support.10xgenomics.com/single-cell-gene-expression/software/pipelines/latest/using/tutorial_mr)


* 